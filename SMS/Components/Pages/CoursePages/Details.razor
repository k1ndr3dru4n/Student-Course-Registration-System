@page "/courses/details/{Id:int}"
@page "/courses/details"
@inject SMS.CimContext DB
@using SMS.Models
@inject NavigationManager NavigationManager
@using Microsoft.EntityFrameworkCore
@rendermode InteractiveServer

<PageTitle>Details</PageTitle>

<h1>Details</h1>

<div>
    <h4>课程</h4>
    <hr />
    @if (course is null)
    {
        <p><em>Loading...</em></p>
    }
    else {
        <div style="background: #fff; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); padding: 24px; margin-bottom: 24px;">
            <h3 style="margin-bottom: 16px;">课程详细信息</h3>
            <table style="width: 100%; border-collapse: collapse;">
                <tr><td style="font-weight: bold; width: 120px;">课程编号(CID)</td><td>@course.CID</td></tr>
                <tr><td style="font-weight: bold;">课程名称</td><td>@course.Name</td></tr>
                <tr><td style="font-weight: bold;">学分</td><td>@course.Credits</td></tr>
                <tr><td style="font-weight: bold;">课程描述</td><td>@course.Description</td></tr>
                <tr><td style="font-weight: bold;">课程状态</td><td>@course.CourseStatus</td></tr>
            </table>
            <div style="margin-top: 24px;">
                <a href="/courses" class="ant-btn ant-btn-primary" style="text-decoration: none; color: white; padding: 6px 15px; border-radius: 6px; background: #1890ff; border: 1px solid #1890ff;">返回列表</a>
            </div>
        </div>
    }
</div>

@code {
    Course? course;

    [Parameter]
    [SupplyParameterFromQuery]
    public int Id { get; set; }

    protected override async Task OnInitializedAsync()
    {
        course = await DB.SMS_Courses.FirstOrDefaultAsync(m => m.Id == Id);

        if (course is null)
        {
            NavigationManager.NavigateTo("notfound");
        }
    }
}
